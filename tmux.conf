# ====================================================================
# CORE SETTINGS AND BEHAVIOR
# ====================================================================
set -g history-limit 10000        # Increase history buffer size
set -g allow-rename off          # Prevent automatic window renaming (optional)
set -g mouse on                  # Enable mouse support for scrolling, pane switching, and resizing
set -g renumber-windows on       # Renumber windows automatically after one is closed
set -g escape-time 100           # Reduce escape-time for faster Vim/Neovim responsiveness

set-option -g default-shell $SHELL
set -g base-index 1              # Start window numbering at 1 instead of 0
set-option -g status-position top # Move status bar to the top

# ====================================================================
# KEY BINDINGS (PREFIX: Ctrl-a)
# ====================================================================

# Change prefix key from C-b to C-a
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# Reload configuration quickly
# Note: Uses ~/.config/tmux/tmux.conf as source, update path if needed
bind r display "Reloading..." \; source-file ~/.config/tmux/tmux.conf \; display "Reloaded!"

# ====================================================================
# PANE SPLITTING (Using standard symbols, not Dvorak-remapped keys)
# ====================================================================

# Split window horizontally (Top/Bottom) - Use Prefix + -
bind - split-window -v -c "#{pane_current_path}"
# Split window vertically (Left/Right) - Use Prefix + |
bind | split-window -h -c "#{pane_current-path}"

# ====================================================================
# PANE NAVIGATION (STANDARD VIM HJKL)
# ====================================================================

# Use the standard Vim keys for switching panes
# Note: The -r flag allows repeatable key presses without hitting the prefix again
bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R

# Clear-screen and clear-history in current pane
bind-key -n C-q send-keys -R ^M \; clear-history

# ====================================================================
# WINDOW MANAGEMENT
# ====================================================================

# Create new window in current directory
bind-key c new-window -c "#{pane_current_path}"

# Join pane (Prompt: join pane from:)
bind-key b command-prompt -p "join pane from:" "join-pane -s '%%'"

# Swap windows using Alt/Meta keys (C-a not needed)
bind-key -n M-1 select-window -t 1
# (Your colleague's config included M-2 to M-9/M-0, replicate as needed)

# ====================================================================
# STATUS BAR CONFIGURATION
# ====================================================================
set -g status-style 'bg=#333333 fg=#5eacd3' # Customized colors
setw -g window-status-current-format " #[reverse]#W#[default] "
setw -g window-status-format " #W #F "
setw -g window-status-separator ""
set-window-option -g status-left " [#S] "
set-window-option -g status-left-length 30

# ====================================================================
# COPY MODE (Using Vi/Vim keys for selection)
# ====================================================================

set-window-option -g mode-keys vi

# Copy to system clipboard (Requires a utility like xclip or re-mapping)
# Original config's copy bindings for Dvorak layout are removed.
# Re-enable the system copy with standard 'y' in copy-mode-vi
unbind -T copy-mode-vi y
unbind -T copy-mode-vi C-f
bind-key -n -T copy-mode-vi y send-keys -X copy-selection -x
bind-key -n -T copy-mode-vi Enter send-keys -X copy-selection-and-cancel

# ====================================================================
# TMUX PLUGINS (Requires TPM - Tmux Plugin Manager)
# ====================================================================

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'sainnhe/tmux-fzf'

# Plugin-specific settings
set -g @continuum-boot-options 'kitty'
set -g @continuum-boot 'on'           # Auto-starts Tmux on boot (Linux/WSL)
set -g @continuum-save-interval '5'   # Auto-save session every 5 minutes
set -g @resurrect-capture-pane-contents 'on' # Save pane content on session save

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
